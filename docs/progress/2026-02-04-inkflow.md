# InkFlow v2 - å¼€å‘è¿›åº¦è·Ÿè¸ª

**PRD æ–‡æ¡£**: [docs/prd/2026-02-04-inkflow.md](../prd/2026-02-04-inkflow.md)  
**å¼€å§‹æ—¥æœŸ**: 2026-02-04  
**å½“å‰çŠ¶æ€**: ğŸŸ¡ è¿›è¡Œä¸­  
**æœ€åæ›´æ–°**: 2026-02-04  

---

## ğŸ“Š æ€»ä½“è¿›åº¦

- **æ•´ä½“è¿›åº¦**: 0%ï¼ˆ0/9ï¼‰
- **å½“å‰é‡Œç¨‹ç¢‘**: Milestone 1 - åŸºç¡€ç»“æ„ä¸åŒ RAG

---

## âœ… é‡Œç¨‹ç¢‘ä¸ä»»åŠ¡æ¸…å•

### Milestone 1: æ–‡æ¡£ + åŒ LightRAGï¼ˆå‰§æƒ…/æŠ€æ³•ï¼‰
- [ ] æ–°å»º v2 PRDï¼š`docs/prd/2026-02-04-inkflow.md`
- [ ] æ–°å»º v2 è¿›åº¦ï¼š`docs/progress/2026-02-04-inkflow.md`
- [ ] docker-compose å¢åŠ  `lightrag_tech`ï¼ˆ9622, novel_techï¼‰
- [ ] è°ƒæ•´ç°æœ‰ `lightrag` workspace ä¸º `novel_story`ï¼ˆ9621ï¼‰
- [ ] Next.js ç¯å¢ƒå˜é‡æ”¯æŒ `LIGHTRAG_TECH_BASE_URL/KEY`
- [ ] `lib/lightrag/client.ts` å°è£… `getStoryRAGClient/getTechRAGClient`
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 2: DB è¿ç§»ï¼ˆå·/ç« çº²/æ‰¹æ³¨/æŠ€æ³•åº“ï¼‰
- [ ] `novels` æ–°å¢ `idea/overall_outline`
- [ ] æ–°å¢ `volumes/chapter_plans/chapter_plan_versions`
- [ ] `chapters` æ–°å¢ `volume_id/plan_id` + çº¦æŸ
- [ ] æ–°å¢ `chapter_annotations`
- [ ] æ–°å¢ `techniques/technique_versions` + tags GIN index
- [ ] v1 æ•°æ®å›å¡«ï¼švolume(å·ä¸€) + chapter_plans + chapters.plan_id/volume_id
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 3: Workbench APIï¼ˆOutliner/ç”Ÿæˆï¼‰
- [ ] `GET /api/novels/[id]/workbench`
- [ ] `POST/PUT volumes` + `POST volumes/generate`
- [ ] `POST/PUT chapter-plans` + `POST confirm`
- [ ] `POST volumes/[volumeId]/chapter-plans/generate`ï¼ˆé»˜è®¤ 10ï¼‰
- [ ] `POST chapter-plans/[planId]/generate?stream=1`ï¼ˆç»‘å®šç« çº²ç”Ÿæˆæ­£æ–‡ï¼‰
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 4: å‰ç«¯é‡æ„ï¼ˆWorkbench ä¸»å…¥å£ï¼‰
- [ ] é¦–é¡µå°è¯´å¡ç‰‡è·³è½¬åˆ° `/novels/[id]/workbench`
- [ ] `/novels/[id]` é‡å®šå‘åˆ° Workbench
- [ ] æ–°å¢ Workbench ä¸‰æ é¡µé¢ï¼ˆç§»åŠ¨ç«¯ Drawer/Tabï¼‰
- [ ] æ–°å»ºå°è¯´å‘å¯¼ï¼ˆidea â†’ 3 æ€»çº²å€™é€‰ â†’ åˆ›å»º â†’ Workbenchï¼‰
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 5: æŠ€æ³•åº“ï¼ˆå®Œæ•´ç®¡ç† + åŒ RAG åŒæ­¥ï¼‰
- [ ] `/techniques` é¡µé¢ï¼ˆåˆ—è¡¨/æœç´¢/tag è¿‡æ»¤/ç¼–è¾‘/åˆ é™¤ï¼‰
- [ ] `techniques` APIï¼ˆCRUD + versions + restoreï¼‰
- [ ] åŒæ­¥ç´¢å¼•åˆ° tech LightRAGï¼ˆå¤±è´¥å¯å›é€€ï¼‰
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 6: Reviewer Loopï¼ˆæ‰¹æ³¨ â†’ AI ä¿®æ”¹ â†’ è½ç‰ˆæœ¬ï¼‰
- [ ] annotations APIï¼ˆGET/POST/apply/apply-and-saveï¼‰
- [ ] å‰ç«¯æ‰¹æ³¨ UIï¼ˆåˆ›å»º/åˆ—è¡¨/æ‰§è¡Œ/åº”ç”¨å¹¶ä¿å­˜ï¼‰
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 7: 2D å›¾è°±é»˜è®¤
- [ ] çŸ¥è¯†å›¾è°±åˆ‡æ¢ä¸º 2Dï¼ˆ`react-force-graph-2d`ï¼‰
- [ ] ç‚¹å‡»èŠ‚ç‚¹è¯¦æƒ…é¢æ¿æ­£å¸¸
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

### Milestone 8: éªŒæ”¶éªŒè¯
- [ ] `npm run lint`
- [ ] `npm run build`
- [ ] agent-browserï¼šæ ¸å¿ƒæµç¨‹èµ°é€šï¼ˆç™»å½• â†’ æ–°å»º â†’ Workbench â†’ å·/ç« çº² â†’ æ­£æ–‡ç”Ÿæˆ â†’ æ‰¹æ³¨ â†’ æŠ€æ³•åº“ â†’ å›¾è°±ï¼‰
- **Git æäº¤**:
  - ï¼ˆå¾…å¡«å†™ï¼‰

---

## ğŸ“ å…³é”®å†³ç­–è®°å½•

- èŒƒå›´ï¼šå…¨é¢é‡æ„ï¼ˆWorkbench ä¸ºä¸»å…¥å£ï¼‰
- å¤§çº²å±‚çº§ï¼šä¹¦-å·-ç« 
- ç« èŠ‚ç¼–å·ï¼šå…¨ä¹¦è¿ç»­
- ç« çº²é”å®šï¼šä¸¥æ ¼é”å®šï¼ˆconfirmed æ‰å…è®¸ç”Ÿæˆæ­£æ–‡ï¼›ä¿®æ”¹ä¼šè½ç‰ˆæœ¬å¹¶å›é€€ draftï¼‰
- ç« çº²ç”Ÿæˆï¼šé»˜è®¤åˆ†æ‰¹ 10 ç« 
- å·çº²ç”Ÿæˆï¼šé»˜è®¤ 5 å·ï¼›æ¯å· target ç« èŠ‚æ•°å¯è‡ªå®šä¹‰
- æŠ€æ³•åº“å½’å±ï¼šæŒ‰ç”¨æˆ·å…¨å±€
- RAG éš”ç¦»ï¼šåŒ LightRAGï¼ˆnovel_story / novel_techï¼‰
- å›¾è°±ï¼š2D é»˜è®¤

